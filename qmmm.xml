<options>
<qmmm help="Executes qmmm calculations for individual molecules and clusters" section="sec:qmmm">
	<print_regions_pdb choices="bool" default="true" help="print the geometry of the regions to a pdb file">true</print_regions_pdb>
	<max_iterations choices="int+" default="100" help="max iterations for qmmm scf loop">100</max_iterations>
	<map_file default="votca_map.xml" help="xml file with segment definition">votca_map.xml</map_file>
	<job_file default="qmmm_jobs.xml" help="name of jobfile to which jobs are written">qmmm_jobs.xml</job_file>
	<io_states default="n e h" help="states to write jobs for and which to parse from jobfile">n e h</io_states>
	<regions default="REQUIRED" help="Definitions of all regions inside qmmmm" list="">
		<qmregion default="OPTIONAL" help="qmregion with dft and optionally gwbse">
			<state default="n" help="initial state to track or ground state for dftcalculations">n</state>
			<gwbse default="OPTIONAL" help="options excited state calculations via GWBSE">
				<tasks choices="[gw,singlets,triplets,all]" default="all" help="tasks to do">all</tasks>
				<ranges choices="default,factor,explicit,full" default="default" help="default: all levels in RPA, 1:2*HOMO in QP and all in BSE; other options: factor,explicit">default</ranges>
				<rpamax default="" help="only needed, if ranges is factor or explicit, number of levels in rpa"/>
				<qpmin default="" help="only needed, if ranges is factor or explicit, lowest MO to be used in GW"/>
				<qpmax default="" help="only needed, if ranges is factor or explicit, highest MO to be used in GW"/>
				<bsemin default="" help="only needed, if ranges is factor or explicit, lowest MO to be used in BSE"/>
				<bsemax default="" help="only needed, if ranges is factor or explicit, highest MO to be used in BSE"/>
				<ignore_corelevels choices="RPA,GW,BSE,none" default="none" help="exclude core MO level from calculation on RPA,GW or BSE level">none</ignore_corelevels>
				<auxbasisset default="OPTIONAL" help="Auxiliary basis set for RI, only used if DFT has no auxiliary set"/>
				<gw>
					<mode choices="evGW,G0W0" default="evGW" help="use single short (G0W0) or self-consistent GW (evGW)">evGW</mode>
					<scissor_shift choices="float" default="0.0" help="preshift unoccupied MOs by a constant for GW calculation" unit="hartree">0.0</scissor_shift>
					<sigma_integrator choices="ppm, exact, cda" default="ppm" help="self-energy correlation integration method">ppm</sigma_integrator>
					<eta choices="float+" default="1e-3" help="small parameter eta of the Green's function" unit="Hartree">1e-3</eta>
					<alpha choices="float" default="1e-3" help="parameter to smooth residue and integral calculation for the contour deformation technique">1e-3</alpha>
					<quadrature_scheme choices="hermite,laguerre,legendre" default="legendre" help="If CDA is used for sigma integration this set the quadrature scheme to use">legendre</quadrature_scheme>
					<quadrature_order choices="8,10,12,14,16,18,20,40,100" default="12" help="Quadrature order if CDA is used for sigma integration">12</quadrature_order>
					<qp_solver choices="fixedpoint,grid,cda" default="grid" help="QP equation solve method">grid</qp_solver>
					<qp_grid_steps choices="int+" default="1001" help="number of QP grid points">1001</qp_grid_steps>
					<qp_grid_spacing choices="float+" default="0.001" help="spacing of QP grid points" unit="Hartree">0.001</qp_grid_spacing>
					<qp_sc_max_iter choices="int+" default="100" help="maximum number of iterations for quasiparticle equation solution">100</qp_sc_max_iter>
					<qp_sc_limit choices="float+" default="1e-5" help="quasiparticle equation solver convergence" unit="Hartree">1e-5</qp_sc_limit>
					<sc_max_iter choices="int+" default="50" help="Maximum number of iterations in eVGW">50</sc_max_iter>
					<mixing_order choices="int+" default="20" help="Mixing of QP energies in evGW - 0: plain, 1: linear, >1: Anderson">20</mixing_order>
					<sc_limit choices="float+" default="1e-5" help="evGW convergence criteria" unit="Hartree">1e-5</sc_limit>
					<mixing_alpha choices="float+" default="0.7" help="mixing alpha, also linear mixing">0.7</mixing_alpha>
					<rebuild_3c_freq choices="int+" default="5" help="how often the 3c integrals in iterate should be rebuilt">5</rebuild_3c_freq>
					<sigma_plot default="OPTIONAL" help="Plotting of self-energy">
						<states help="plot sigma(omega) for the following states, e.g 1 3 5"/>
						<steps choices="int+" default="201" help="points to plot">201</steps>
						<spacing choices="float+" default="1e-2" help="spacing of points units" unit="Hartree">1e-2</spacing>
						<filename default="QPenergies_sigma.dat" hep="File with the sigma plot data">QPenergies_sigma.dat</filename>
					</sigma_plot>
				</gw>
				<bse>
					<exctotal choices="int+" default="10" help="maximum number of BSE states to calculate">10</exctotal>
					<useTDA choices="bool" default="false" help="use TDA for BSE">false</useTDA>
					<dyn_screen_max_iter choices="int+" default="0" help="maximum number of iterations for perturbative dynamical screening in BSE">0</dyn_screen_max_iter>
					<dyn_screen_tol choices="float+" default="1e-5" help="convergence tolerance for perturbative dynamical screening in BSE">1e-5</dyn_screen_tol>
					<davidson help="options for Davidson eigenvalue BSE solver">
						<correction choices="DPR,OHLSEN" default="DPR" help="Davidson correction method">DPR</correction>
						<tolerance choices="loose,normal,strict,lapack" default="normal" help="Numerical tolerance">normal</tolerance>
						<update choices="min,safe,max" default="safe" help=" how large the search space">safe</update>
						<maxiter choices="int+" default="50" help="max iterations">50</maxiter>
					</davidson>
					<use_Hqp_offdiag choices="bool" default="false" help="Using symmetrized off-diagonal elements of QP Hamiltonian in BSE">false</use_Hqp_offdiag>
					<print_weight choices="float+" default="0.5" help="print exciton WF composition weight larger than minimum">0.5</print_weight>
					<fragments default="OPTIONAL" help="fragment definitions for bse analysis" list="">
						<fragment>
							<indeces default="REQUIRED" help="indeces of atoms in this fragment, e.g. 1 3 13:17"/>
						</fragment>
					</fragments>
				</bse>
			</gwbse>
			<dftpackage help="options for dftpackages">
				<name choices="xtp,orca" default="xtp" help="Name of the DFT package">xtp</name>
				<charge choices="int" default="0" help="Molecular charge">0</charge>
				<spin choices="int+" default="1" help="Molecular multiplicity">1</spin>
				<basisset default="def2-tzvp" help="Basis set for MOs">def2-tzvp</basisset>
				<auxbasisset default="OPTIONAL" help="Auxiliary basis set for RI"/>
				<externalfield default="OPTIONAL" help="Field given in x y z components" unit="Hartree/bohr"/>
				<executable default="OPTIONAL" help="Path to executable for dftpackage"/>
				<ecp default="OPTIONAL" help="Effective Core Potentials for DFT Calculations"/>
				<optimize choices="bool" default="false" help="Perform a molecular geometry optimization">false</optimize>
				<functional default="XC_HYB_GGA_XC_PBEH" help="Exchange correlation functional used. You can also specify an exchange and a correlation functional">XC_HYB_GGA_XC_PBEH</functional>
				<scratch default="/tmp/qmpackage" help="path to the scratch folder">/tmp/qmpackage</scratch>
				<polarization choices="bool" default="false" help="Calculate polarisation">false</polarization>
				<dipole_spacing choices="float+" default="0.1" help="Spacing for splitting multipoles into charges" unit="bohr">0.1</dipole_spacing>
				<temporary_file default="temp" help="Filename for temporary files without extension">temp</temporary_file>
				<convergence_tightness choices="low,normal,tight,verytight" default="tight" help="How accurate the dft self-consistency has to be">tight</convergence_tightness>
				<cleanup default="" help="files to remove after the calculation. Specify the fileextensions"/>
				<initial_guess choices="independent,atom,orbfile" default="atom" help="Method to use to make initial guess, independent(electrons) or atom(densities) or previous calculation keyword orbfile">atom</initial_guess>
				<orca help="orca specific keywords can be added here, where the xml tag corresponds to the option and the value to the option's value" unchecked=""/>
				<xtpdft help="xtpdft specific keywords can be added here">
					<use_external_density choices="bool" default="false" help="whether or not to use a precomputed external density">false</use_external_density>
					<screening_eps choices="float+" default="1e-9" help="screening eps">1e-9</screening_eps>
					<fock_matrix_reset choices="int+" default="5" help="how often the fock matrix is reset">5</fock_matrix_reset>
					<convergence>
						<energy choices="float+" default="1E-7" help="DeltaE at which calculation is converged" unit="hartree">1E-7</energy>
						<method choices="DIIS,mixing" default="DIIS" help="Main method to use for convergence accelertation">DIIS</method>
						<DIIS_start choices="float+" default="0.002" help="DIIS error at which DIIS takes over">0.002</DIIS_start>
						<ADIIS_start choices="float+" default="0.8" help="DIIS error at which ADIIS takes over">0.8</ADIIS_start>
						<DIIS_length choices="int+" default="20" help="old hamiltonians to keep in history">20</DIIS_length>
						<DIIS_maxout choices="bool" default="false" help="if true remove the maximum element in the history if DIIS_length is exceeded.Otherwise, the oldest element is removed.">false</DIIS_maxout>
						<levelshift choices="float+" default="0.0" help="levelshift to apply to hamiltonian " unit="hartree">0.0</levelshift>
						<levelshift_end choices="float+" default="0.2" help="DIIS error at levelshifting is disabled">0.2</levelshift_end>
						<max_iterations choices="int+" default="100" help="max iterations to use">100</max_iterations>
						<error choices="float+" default="1e-7" help="convergence error">1e-7</error>
						<mixing choices="float+" default="0.7" help="mixing parameter for linear mixing of density matrices">0.7</mixing>
					</convergence>
					<integration_grid choices="xcoarse,coarse,medium,fine,xfine" default="medium" help="vxc grid quality">medium</integration_grid>
				</xtpdft>
			</dftpackage>
			<statetracker default="OPTIONAL" help="combination of different filters you can use to track states, lowest energy state that fits all filters is chosen">
				<oscillatorstrength choices="float+" default="OPTIONAL" help="picks first state above a threshold"/>
				<localisation default="OPTIONAL" help="picks first state which is localized (occupation above a threshild) on the fragment">
					<fragment default="REQUIRED" help="Fragment definiton using atomids, can be a combination of ids and ranges of ids e.g. 1:5"/>
					<threshold default="0.1" help="Threshold above which a state is considered localized">0.1</threshold>
				</localisation>
				<chargetransfer default="OPTIONAL" help="picks first state which exhibits CT character on the fragment">
					<fragment default="REQUIRED" help="Fragment definiton using atomids, can be a combination of ids and ranges of ids e.g. 1:5"/>
					<threshold default="0.8" help="Threshold above which a state is considered a CT state">0.8</threshold>
				</chargetransfer>
				<density choices="float+" default="OPTIONAL" help="Tracks state by comparing the density to an earlier state, you have to specify a minimum threshold, which can be zero"/>
				<overlap choices="float+" default="OPTIONAL" help="Tracks state by calculating the overlap with an earlier state, you have to specify a minimum threshold, which can be zero"/>
			</statetracker>
			<grid_for_potential choices="xcoarse,coarse,medium,fine,xfine" default="medium" help="Grid to integrate influence of qm density om other regions">medium</grid_for_potential>
			<extgrid choices="xcoarse,coarse,medium,fine,xfine" default="medium" help="grid on which the interaction with classical regions is compute">medium</extgrid>
			<tolerance_energy choices="float+" default="5e-5" help="if energy difference for this region is below this value it is considered converged" unit="Hartree">5e-5</tolerance_energy>
			<tolerance_density choices="float+" default="5e-5" help="if RMS difference of density matrix is below this value it is considered converged">5e-5</tolerance_density>
			<id choices="int+" default="REQUIRED" help="id of the region, first region has to have id 0, ids must be consecutive"/>
			<segments default="OPTIONAL" help="List of segments to include in the region separated by a whitespace. Each segment is defined by an index and a qmstate or a filename for the coordinates. e.g 1:s3 or 0:ORFILES/methane.xyz"/>
			<cutoff default="OPTIONAL" help="specifies the cutoff around either an another region or explicit segments in this region">
				<radius choices="float+" default="REQUIRED" help="radius" unit="nm"/>
				<geometry default="n" help="geometry that should be used for mapping all the segments in the radius">n</geometry>
				<region choices="int+" default="REQUIRED" help="Id of the region the cutoff should refer to, can be the same as this region's id, if segments are specified"/>
				<explicit_segs choices="bool" default="false" help="specifies if cutoff with respect to other region should be only towards segments specified explicitly using the `segments` tag">false</explicit_segs>
			</cutoff>
		</qmregion>
		<polarregion default="OPTIONAL" help="polar region with polarisation dipoles and thole damping">
			<polar help="Options for the electrostatic interaction">
				<tolerance_energy default="1e-5" help="Energy change as convergence criterion">1e-5</tolerance_energy>
				<tolerance_dipole default="1e-5" help="Field change as convergence criterion">1e-5</tolerance_dipole>
				<max_iter default="500" help="Maximum number of iterations">500</max_iter>
				<exp_damp default="0.39" help="Thole sharpness parameter">0.39</exp_damp>
			</polar>
			<tolerance_energy choices="float+" default="5e-5" help="if energy difference for this region is below this value it is considered converged" unit="Hartree">5e-5</tolerance_energy>
			<tolerance_dipole choices="float+" default="5e-5" help="if RMS difference of all dipoles in the is below this value it is considered converged" unit="bohr">5e-5</tolerance_dipole>
			<id choices="int+" default="REQUIRED" help="id of the region, first region has to have id 0, ids must be consecutive"/>
			<segments default="OPTIONAL" help="List of segments to include in the region separated by a whitespace. Each segment is defined by an index and a qmstate or a filename for the coordinates. e.g 1:s3 or 0:ORFILES/methane.xyz"/>
			<cutoff default="OPTIONAL" help="specifies the cutoff around either an another region or explicit segments in this region">
				<radius choices="float+" default="REQUIRED" help="radius" unit="nm"/>
				<geometry default="n" help="geometry that should be used for mapping all the segments in the radius">n</geometry>
				<region choices="int+" default="REQUIRED" help="Id of the region the cutoff should refer to, can be the same as this region's id, if segments are specified"/>
				<explicit_segs choices="bool" default="false" help="specifies if cutoff with respect to other region should be only towards segments specified explicitly using the `segments` tag">false</explicit_segs>
			</cutoff>
		</polarregion>
		<staticregion default="OPTIONAL">
			<id choices="int+" default="REQUIRED" help="id of the region, first region has to have id 0, ids must be consecutive"/>
			<segments default="OPTIONAL" help="List of segments to include in the region separated by a whitespace. Each segment is defined by an index and a qmstate or a filename for the coordinates. e.g 1:s3 or 0:ORFILES/methane.xyz"/>
			<cutoff default="OPTIONAL" help="specifies the cutoff around either an another region or explicit segments in this region">
				<radius choices="float+" default="REQUIRED" help="radius" unit="nm"/>
				<geometry default="n" help="geometry that should be used for mapping all the segments in the radius">n</geometry>
				<region choices="int+" default="REQUIRED" help="Id of the region the cutoff should refer to, can be the same as this region's id, if segments are specified"/>
				<explicit_segs choices="bool" default="false" help="specifies if cutoff with respect to other region should be only towards segments specified explicitly using the `segments` tag">false</explicit_segs>
			</cutoff>
		</staticregion>
	</regions>
</qmmm>
</options>

